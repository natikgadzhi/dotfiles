- defaults:
    link:
      create: true
      relink: true
      force: true

- clean: ["~"]

- link:
    ~/.tmux.conf:
      path: .tmux.conf
    ~/.gitconfig:
      path: .gitconfig
    ~/.config/:
      glob: true
      path: .config/*
    ~/.gnupg/gpg-agent.conf:
      path: gpg-agent.conf
    ~/.ansible.cfg:
      path: .ansible.cfg

    # These two launchctl agents are only required on Mac OS
    # to make gpg-agent play nice with ssh auth in apps that don't start
    # from shell with it's environment.
    ~/Library/LaunchAgents/homebrew.gpg.gpg-agent.plist:
      path: Library/LaunchAgents/homebrew.gpg.gpg-agent.plist
    ~/Library/LaunchAgents/link-ssh-auth-sock.plist:
      path: Library/LaunchAgents/link-ssh-auth-sock.plist

# These shell commands setup additional software, and lots of them assume we're running on Mac OS.
# In theory, this is better extracted into an Ansible playbook, and conditionally executed
- shell:
  # tell iTerm2 to use the provided configuration
  - defaults write com.googlecode.iterm2 "PrefsCustomFolder" -string "/Users/nategadzhi/.config/iterm2"
  - defaults write com.googlecode.iterm2 "LoadPrefsFromCustomFolder" -bool true
